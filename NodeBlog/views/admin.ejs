<!DOCTYPE html>
<html lang="en">
<head>
	<%-include('./inc/head')%>
</head>
<body>

	<%-include('./inc/navbar')%>
	
	<div class="container-fluid p-0">
		<div id="carouselExampleControls" class="carousel slide" data-ride="carousel"  style="height: 600px;">
		  <div class="carousel-inner">
		    <div class="carousel-item active">
		      <img src="https://econic-technologies.com/wp-content/uploads/2017/09/slide-4-background.jpg" class="d-block w-100" alt="..."  style="height: 600px;">
		    </div>
		    <div class="carousel-item">
		      <img src="http://onondagacamp.com/wp-content/uploads/2014/03/our-philosophy-background-640x375.jpg" class="d-block w-100" alt="..."  style="height: 600px;">
		    </div>
		    <div class="carousel-item">
		      <img src="https://images.template.net/wp-content/uploads/2014/11/Powerpoint-Background-2.jpg" class="d-block w-100" alt="..."  style="height: 600px;">
		    </div>
		  </div>
		  <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
		    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
		    <span class="sr-only">Previous</span>
		  </a>
		  <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
		    <span class="carousel-control-next-icon" aria-hidden="true"></span>
		    <span class="sr-only">Next</span>
		  </a>
		</div>
	</div>


	<div class="container mt-3">

		<div class="row justify-content-end mb-5 mt-5">
			<a href="/add" class="btn btn-danger">Add Blog</a>
		</div>


		<div class="row d-flex justify-content-center">

			<% blogs.forEach(blog=>{ %>

			<div class="col-lg-4 mb-4">
				<div class="card" style="width: 18rem;">
				  <img src=<%=blog.imageurl%> class="card-img-top" alt=<%=blog.title%> />

				  <div class="card-body">
				    <h5 class="card-title"><%=blog.title.substring(0,20)%></h5>
				    <p class="card-text"><%=blog.longtxt.substring(0,100)%><span>...</span></p>
				    
				  </div>

				  <div class="card-footer d-flex justify-content-around">
					<a href="/blog/<%=blog._id%>" class="btn btn-primary">Edit</a>

					 <a class="del" data-doc="<%=blog._id%>" >Delete</a> 
				  </div>

				</div>
			</div>

			<%})%>
		
	</div>

	<%-include('./inc/folderjs')%>


	<script>
		const del=document.querySelector('a.del');


		del.addEventListener('click', (e)=>{
			const endpoint='/admin/delete/${del.dataset.doc}';


			fetch(endpoint,{
				method:'DELETE'
			})
			.then((response)=>response.json())
			.then((data)=>window.location.href=data.link)
			.catch((err)=>{
				console.log(err)
			})
		})
	</script>
</body>
</html>